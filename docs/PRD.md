# Agent FamilyStage PRD

更新时间：2026-02-12

## 1. 项目目标

在现有 SecondMe OAuth 网站基础上，扩展一个“春节亲戚模拟器”最小 MVP：

1. 允许他人通过 SecondMe 登录授权后进入公开 Agent 池。
2. 允许运营者将 Agent 手动绑定为“七大姑八大姨”角色。
3. 允许登录用户发起春节场景对话，由绑定 Agent 扮演角色回复。

## 2. 产品口径（当前冻结）

1. 可见范围：所有登录用户可用。
2. 角色映射：手动绑定。
3. 内容风格：轻度魔幻。
4. 身份展示：仅显示角色名，不展示授权人真实昵称。
5. 撤销策略：立即下线角色，历史会话保留脱敏记录。
6. 同意机制：登录即默认加入公开池。
7. MVP 页面范围：3 页（角色池、绑定页、聊天页）。

## 3. 功能清单

## 3.1 登录与授权

1. OAuth 登录/回调/登出。
2. 授权成功后自动加入公开 Agent 池（`ACTIVE + PUBLIC`）。

## 3.2 Agent 池与角色绑定

1. 公开 Agent 池查看。
2. 角色绑定与权重配置。
3. 绑定列表查看。
4. Agent 撤销与下线。

## 3.3 对话能力

1. 自动多 Agent 群聊（无人工输入）。
2. 多角色轮流发言。
3. 上游失败时降级回复，保持可用。

## 3.4 页面范围

1. `/` 首页（登录、入口导航）。
2. `/agents` 角色池页。
3. `/roles` 角色绑定页。
4. `/chat` 自动群聊页。

## 4. 数据模型范围

1. `User`
2. `AgentProfile`
3. `RoleBinding`
4. `ChatSession`
5. `ChatMessage`

## 5. 安全与体验约束

1. 文本输入做敏感词拦截。
2. 存储消息做脱敏处理（手机号/邮箱/证件号模式）。
3. 被撤销 Agent 不能用于新会话。

## 6. 当前状态

1. OAuth 登录：已可用。
2. Agent 池/绑定/撤销：已可用。
3. 自动多 Agent 对话：已可用。
4. 线上主地址：`https://agent-familystage.vercel.app`

## 7. 后续产品迭代建议

1. 加“用户手动同意加入池子”流程（替代登录即加入）。
2. 引入角色冲突规则与开场模板，提升对话质量。
3. 增加运营看板（会话量、成功率、拦截率、留存）。
4. 支持语音/多模态版本（非 MVP）。
