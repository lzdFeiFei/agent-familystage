# Agent FamilyStage 页面设计 v0.3

更新时间：2026-02-12  
关联文档：`docs/PRDv0.3.md`、`docs/DEV_TASKLIST_v0.3.md`

---

## 1. 页面总览

MVP 共 4 页：

1. `Login Page`（`/login`）
2. `Home Page`（`/`）
3. `New Year Stage Config Page`（`/stage/config`）
4. `Conversation Page`（`/stage/:id`）

---

## 2. 全局交互规范

1. 主流程按钮统一使用主色高亮，文案用动词开头（如“开始登录”“进入配置”“开始对话”）。
2. 所有页面必须提供 3 态：加载态、空态、失败态。
3. 错误提示遵循“问题 + 可操作建议”（例：网络异常，请重试）。
4. 关键异步操作提供可见反馈（loading、进度、流式状态条）。

---

## 3. Login Page（`/login`）

## 3.1 信息结构

- 品牌区：Logo + 标题 + 一句话说明
- 操作区：SecondMe 登录按钮
- 辅助区：错误提示、重试入口、隐私说明

## 3.2 线框（ASCII）

```text
+--------------------------------------------------+
| LOGO  Agent FamilyStage                          |
| 春节家庭剧场：和亲友 AI 一起聊起来               |
|                                                  |
| [ 使用 SecondMe 登录 ]                           |
|                                                  |
| (错误提示区域：授权取消/网络异常/系统繁忙)       |
| [ 重新登录 ]                                     |
|                                                  |
| 底部：隐私说明 / 服务条款                        |
+--------------------------------------------------+
```

## 3.3 关键交互

1. 点击登录：跳转 OAuth；按钮进入禁用+loading。
2. OAuth 失败返回：展示失败信息，不清空页面上下文。
3. OAuth 成功：自动跳转首页并刷新用户态。

---

## 4. Home Page（`/`）

## 4.1 信息结构

- 顶部导航：产品名、用户头像、退出
- 主内容区（中间）：Agent 列表（头像、昵称、可用状态）
- 右侧栏：我的信息卡（昵称、头像、账号状态）+ 主行动区（进入新年场景配置）

## 4.2 线框（ASCII）

```text
+--------------------------------------------------------------------------+
| Agent FamilyStage                                       [用户头像] [退出]|
+--------------------------------------------------------------------------+
| 主内容区（中间）                         | 右侧栏                         |
| 已注册 Agent 列表                        | 我的信息                       |
| [卡片][卡片][卡片]...                    | [头像] 昵称 @secondme_id       |
| 头像 昵称 状态标签                        | 账号状态标签                    |
|                                           |                                |
|                                           | [ 进入新年场景配置 ]           |
+--------------------------------------------------------------------------+
```

## 4.3 关键交互

1. 页面加载并行请求 `me` 与 `agents`，优先渲染骨架屏。
2. Agent 为空时在主内容区展示空态插画与引导文案。
3. 右侧栏常驻显示用户信息与主行动按钮，点击进入配置页。

---

## 5. New Year Stage Config Page（`/stage/config`）

## 5.1 信息结构

- Step 1：场景类型（单选）
- Step 2：谈话主题（默认/自定义）
- Step 3：参与角色与 Agent 映射（列表配置）
- 提交区：开始对话按钮、校验提示

## 5.2 线框（ASCII）

```text
+--------------------------------------------------------------+
| 新年家庭剧场配置                                              |
| Step 1 场景： (•)年夜饭 ( )串门 ( )拜年电话 ( )家庭群聊      |
|                                                              |
| Step 2 主题： [默认主题下拉]  或  [自定义输入框___________]   |
|                                                              |
| Step 3 参与角色映射                                           |
| 角色A [Agent下拉]                                             |
| 角色B [Agent下拉]                                             |
| [+ 添加角色]                                                  |
|                                                              |
| (校验提示区域)                                                |
| [ 开始对话 ]                                                  |
+--------------------------------------------------------------+
```

## 5.3 关键交互

1. 角色名不允许重复；Agent 不可用时不可选。
2. 自定义主题为空时回退默认主题。
3. 点击“开始对话”前执行前后端双重校验，成功后跳转会话页。

---

## 6. Conversation Page（`/stage/:id`）

## 6.1 信息结构

- 顶部会话条：场景、主题、状态（运行中/重连中/结束）
- 消息流区域：按角色气泡展示流式内容
- 控制区：停止会话、重连、返回主页

## 6.2 线框（ASCII）

```text
+--------------------------------------------------------------+
| 场景: 年夜饭   主题: 春节安排   状态: 运行中                  |
| [返回主页]                                    [停止会话]      |
+--------------------------------------------------------------+
| 大伯: 今年这个...（流式中）                                   |
| 二姨: 我建议先...                                             |
| 我:   好的，那我们...                                         |
| [系统提示: 某角色超时，已使用降级回复]                        |
| ...                                                           |
+--------------------------------------------------------------+
| 连接状态：正常 / 重连中 / 中断                                |
+--------------------------------------------------------------+
```

## 6.3 关键交互

1. 增量渲染：按 `seq` 合并 `delta`，避免消息抖动与乱序。
2. 流式中断：展示“重连”并可恢复拉流。
3. 停止会话：弹确认，调用 stop 接口并更新状态为 `STOPPED`。

---

## 7. 页面状态设计（统一）

1. Loading：骨架屏 + 按钮禁用。
2. Empty：提示“暂无数据” + 下一步按钮。
3. Error：错误文案 + 重试按钮 + 帮助提示。
4. Disabled：不可操作控件需给原因（如“该 Agent 已下线”）。

---

## 8. 文案规范（核心）

1. 主按钮文案：`开始登录`、`进入配置`、`开始对话`、`停止会话`
2. 失败文案模板：`{问题}，请{可恢复动作}`  
   示例：`连接中断，请点击重连继续。`
3. 降级文案模板：`当前角色暂时无法响应，系统已提供简短回复。`
